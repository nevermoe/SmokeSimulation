cscope 15 $HOME/Documents/File/research/model_reduction -q 0000000340 0000021476
	@arcball.cpp

1 
	#_USE_MATH_DEFINES


	)

3 
	~"cÜe.h
"

5 
usšg
 
Çme¥aû
 
	g¡d
;

6 
usšg
 
Çme¥aû
 
	gEig’
;

12 
	gArcb®l
::
	$Arcb®l
()

14 
this
->
b®lRadius
=600;

15 
isRÙ©šg
=
çl£
;

16 
width
=
height
=0;

17 
	`»£t
();

18 
	}
}

26 
	gArcb®l
::
	$£tWidthHeight
(
w
, 
h
)

28 
width
=
w
;

29 
height
=
h
;

30 
b®lRadius
 = 
	`mš
(()(
w
/2), ()(
h
/2));

31 
	}
}

38 
	gArcb®l
::
	$£tRadius
(
ÃwRadius
)

40 
b®lRadius
 = 
ÃwRadius
;

41 
	}
}

51 
	gArcb®l
::
	$¡¬tRÙ©iÚ
(
_x
, 
_y
)

53 
x
 = ( (
_x
)-(
width
/2) );

54 
y
 = ((
height
/2)-
_y
);

57 
	`glG‘Flßtv
(
GL_MODELVIEW_MATRIX
, 
¡¬tM©rix
);

60 
¡¬tRÙ©iÚVeùÜ
 = 
	`cÚv”tXY
(
x
,
y
);

61 
¡¬tRÙ©iÚVeùÜ
.
	`nÜm®ize
();

63 
cu¼’tRÙ©iÚVeùÜ
ğ
¡¬tRÙ©iÚVeùÜ
;

64 
isRÙ©šg
 = 
Œue
;

66 
	}
}

75 
	gArcb®l
::
	$upd©eRÙ©iÚ
(
_x
, 
_y
)

77 
x
 = ( (
_x
)-(
width
/2) );

78 
y
 = ((
height
/2)-
_y
);

80 
cu¼’tRÙ©iÚVeùÜ
 = 
	`cÚv”tXY
(
x
,
y
);

82 
cu¼’tRÙ©iÚVeùÜ
.
	`nÜm®ize
();

86 
	`glM©rixMode
(
GL_MODELVIEW
);

87 
	`glLßdId’t™y
();

88 
	`­¶yRÙ©iÚM©rix
();

90 
	}
}

98 
	gArcb®l
::
	$­¶yRÙ©iÚM©rix
()

101 
	`glMuÉM©rixf
(
¡¬tM©rix
);

103 ià(
isRÙ©šg
) {

106 iàĞĞ
cu¼’tRÙ©iÚVeùÜ
 - 
¡¬tRÙ©iÚVeùÜ
).
	`nÜm
() > 1E-6 ) {

107 
VeùÜ3d
 
rÙ©iÚAxis
 = 
cu¼’tRÙ©iÚVeùÜ
.
	`üoss
(
¡¬tRÙ©iÚVeùÜ
);

108 
rÙ©iÚAxis
.
	`nÜm®ize
();

110 
v®
 = 
cu¼’tRÙ©iÚVeùÜ
.
	`dÙ
(
¡¬tRÙ©iÚVeùÜ
);

111 
v®
 > (1-1E-10) ? val=1.0 : val=val ;

112 
rÙ©iÚAngË
 = 
	`acos
(
v®
è* 180.0f/()
M_PI
;

115 
	`­¶yT¿n¦©iÚM©rix
(
Œue
);

116 
	`glRÙ©ef
(
rÙ©iÚAngË
 * 2, -
rÙ©iÚAxis
.
	`x
(), -rÙ©iÚAxis.
	`y
(),-rÙ©iÚAxis.
	`z
());

117 
	`­¶yT¿n¦©iÚM©rix
(
çl£
);

121 
	`glMuÉM©rixf
(
¡¬tM©rix
);

123 
	}
}

130 
	gArcb®l
::
	$¡İRÙ©iÚ
()

132 
	`glM©rixMode
(
GL_MODELVIEW
);

133 
	`glLßdId’t™y
();

134 
	`­¶yRÙ©iÚM©rix
();

136 
	`glG‘Flßtv
(
GL_MODELVIEW_MATRIX
, 
¡¬tM©rix
);

137 
isRÙ©šg
 = 
çl£
;

138 
	}
}

145 
	gArcb®l
::
	$­¶yT¿n¦©iÚM©rix
(
boŞ
 
»v”£
)

147 
çùÜ
 = (
»v”£
?-1.0f:1.0f);

148 
tx
 = 
ŒªsX
 + (
cu¼’tT¿nsX
 - 
¡¬tT¿nsX
)*
TRANSLATION_FACTOR
;

149 
ty
 = 
ŒªsY
 + (
cu¼’tT¿nsY
 - 
¡¬tT¿nsY
)*
TRANSLATION_FACTOR
;

150 
	`glT¿n¦©ef
(
çùÜ
*
tx
, faùÜ*(-
ty
), 0);

151 
	}
}

160 
VeùÜ3d
 
	gArcb®l
::
	$cÚv”tXY
(
x
, 
y
)

163 
d
 = 
x
*x+
y
*y;

164 
¿diusSqu¬ed
 = 
b®lRadius
*ballRadius;

165 ià(
d
 > 
¿diusSqu¬ed
) {

166  
	`VeùÜ3d
(()
x
,()
y
, 0 );

169  
	`VeùÜ3d
(()
x
,()
y
, 
	`sq¹
(
¿diusSqu¬ed
 - 
d
));

171 
	}
}

177 
	gArcb®l
::
	$»£t
()

179 
fov
 = 
INITIAL_FOV
;

181 
	`mem£t
(
¡¬tM©rix
, 0, (startMatrix));

182 
¡¬tM©rix
[0] = 1;

183 
¡¬tM©rix
[1] =0;

184 
¡¬tM©rix
[2] = 0;

185 
¡¬tM©rix
[3] = 0;

186 
¡¬tM©rix
[4] = 0;

187 
¡¬tM©rix
[5] =1;

188 
¡¬tM©rix
[6] = 0;

189 
¡¬tM©rix
[7] = 0;

190 
¡¬tM©rix
[8] = 0;

191 
¡¬tM©rix
[9] =0;

192 
¡¬tM©rix
[10] = 1;

193 
¡¬tM©rix
[11] = 0;

194 
¡¬tM©rix
[12] = 0;

195 
¡¬tM©rix
[13] =0;

196 
¡¬tM©rix
[14] = 0;

197 
¡¬tM©rix
[15] = 1;

199 
ŒªsX
 = 
ŒªsY
 = 0;

200 
¡¬tT¿nsX
 = 
¡¬tT¿nsY
 = 
cu¼’tT¿nsX
 = 
cu¼’tT¿nsY
 = 0;

201 
	}
}

204 cÚ¡ 
	gArcb®l
::
INITIAL_FOV
 = 30;

205 cÚ¡ 
	gArcb®l
::
TRANSLATION_FACTOR
 = 0.01f;

	@arcball.h

1 #iâdeà
ARCBALL_H


2 
	#ARCBALL_H


	)

5 
	~"cÜe.h
"

7 
usšg
 
Çme¥aû
 
	gEig’
;

90 
	tGLM©rix
[16];

92 şas 
	cArcb®l


94 
	m´iv©e
:

95 
fov
;

96 
	mfovS¹Y
;

97 
	mfovCu¼’tY
;

99 
	mŒªsX
, 
	mŒªsY
;

100 
	mcu¼’tT¿nsX
, 
	mcu¼’tT¿nsY
;

101 
	m¡¬tT¿nsX
, 
	m¡¬tT¿nsY
;

103 
GLM©rix
 
	m¡¬tM©rix
;

104 
GLM©rix
 
	mcu¼’tM©rix
;

105 
VeùÜ3d
 
	m¡¬tRÙ©iÚVeùÜ
;

106 
VeùÜ3d
 
	mcu¼’tRÙ©iÚVeùÜ
;

107 
boŞ
 
	misRÙ©šg
;

108 
	mb®lRadius
;

109 
	m»sidu®Spš
;

110 cÚ¡ 
	mINITIAL_FOV
;

111 cÚ¡ 
	mMINIMAL_FOV
;

112 cÚ¡ 
	mTRANSLATION_FACTOR
;

114 
VeùÜ3d
 
cÚv”tXY
(
x
, 
y
);

115 
	mwidth
, 
	mheight
;

116 
	mpublic
:

117 
Arcb®l
();

119 
£tWidthHeight
(
w
, 
h
);

120 
¡¬tRÙ©iÚ
(
x
, 
y
);

121 
upd©eRÙ©iÚ
(
x
, 
y
);

122 
¡İRÙ©iÚ
();

125 
­¶yT¿n¦©iÚM©rix
(
boŞ
 
»v”£
 = 
çl£
);

126 
­¶yRÙ©iÚM©rix
();

128 
£tRadius
(
ÃwRadius
);

129 
»£t
();

	@camera.cpp

1 
	~"cÜe.h
"

3 
	gCam”a
::
	$Cam”a
(
wšX
, 
wšY
) {

5 cÚ¡ 
GLæßt
 
light_pos™iÚ
[] = {2.0f, 1.0f, 10.0f, 1.0f};

6 cÚ¡ 
GLæßt
 
light_amb›Á
[] = {0.2f, 0.2f, 0.2f, 1.0f};

7 cÚ¡ 
GLæßt
 
light_diffu£
[] = {1.0f, 1.0f, 1.0f, 1.0f};

8 cÚ¡ 
GLæßt
 
light_¥ecuÏr
[] = {1.0f, 1.0f, 1.0f, 1.0f};

10 
	`glLightfv
(
GL_LIGHT0
, 
GL_POSITION
, 
light_pos™iÚ
);

11 
	`glLightfv
(
GL_LIGHT0
, 
GL_AMBIENT
, 
light_amb›Á
);

12 
	`glLightfv
(
GL_LIGHT0
, 
GL_DIFFUSE
, 
light_diffu£
);

13 
	`glLightfv
(
GL_LIGHT0
, 
GL_SPECULAR
, 
light_¥ecuÏr
);

15 
	`glEÇbË
(
GL_LIGHTING
);

16 
	`glEÇbË
(
GL_LIGHT0
);

34 
	`Re£t
(
wšX
, 
wšY
);

35 
	}
}

37 
	gCam”a
::
	$Re£t
(
wšX
, 
wšY
)

39 
¡d
::
cout
 << "ÿm”¨»£t" << std::
’dl
;

40 
this
->
wšX
 = winX;

41 
this
->
wšY
 = winY;

42 
FOV
 = 60.0f;

43 
a¥eù
 = 
wšX
 / 
wšY
;

44 
N—rCl
 = 0.1f;

45 
F¬Cl
 = 100.0f;

47 
	`PutCam”a
();

48 
	}
}

50 
	gCam”a
::
	$PutCam”a
()

52 
	`glEÇbË
(
GL_DEPTH_TEST
);

53 
	`glM©rixMode
(
GL_PROJECTION
);

54 
	`glLßdId’t™y
();

57 
	`gluP”¥eùive
(
FOV
, 
a¥eù
, 
N—rCl
, 
F¬Cl
);

59 
	}
}

62 
	gCam”a
::
	$D¿w
() {

64 
	`glV›wpÜt
(0, 0, 
wšX
, 
wšY
);

65 
	`glCË¬
(
GL_COLOR_BUFFER_BIT
 | 
GL_DEPTH_BUFFER_BIT
);

66 
	`glCŞÜ3f
(1.0, 1.0, 1.0);

67 
	}
}

69 
	gCam”a
::
	$S‘V›wpÜt
(
wšX
, 
wšY
)

71 
this
->
wšX
 = winX;

72 
this
->
wšY
 = winY;

73 
	}
}

75 
	gCam”a
::
	$S‘A¥eù
(
a
)

77 
a¥eù
 = 
a
;

78 
	}
}

	@camera.h

5 #iâdeà
CAMERA_H


6 
	#CAMERA_H


	)

8 
	~"cÜe.h
"

12 şas 
	cCam”a
 {

13 
	mpublic
:

14 
Cam”a
(
wšX
, 
wšY
);

16 
Re£t
(
wšX
, 
wšY
);

17 
D¿w
();

20 
S‘A¥eù
(
a
);

21 
S‘V›wpÜt
(
wšX
, 
wšY
);

22 
PutCam”a
();

24 
	m´iv©e
:

26 
FOV
;

27 
	ma¥eù
;

28 
	mN—rCl
;

29 
	mF¬Cl
;

30 
	mwšX
;

31 
	mwšY
;

	@controller.cpp

5 
	~"cÜe.h
"

7 
	#WINDOWTITLE
 "PŞy D¿w”"

	)

9 
CÚŒŞËr
* 
g_cÚŒŞËr
;

12 
	$”rÜ_ÿÎback
(
”rÜ
, cÚ¡ * 
desütiÚ
)

14 
	`åuts
(
desütiÚ
, 
¡d”r
);

15 
	}
}

17 
	$»size
(
GLFWwšdow
 *
wšdow
, 
x
,
y
)

19 ::
g_cÚŒŞËr
->
	`Resize
(
wšdow
, 
x
, 
y
);

20 
	}
}

22 
	$keybßrd
(
GLFWwšdow
 * 
wšdow
, 
key
, 
sÿncode
,
aùiÚ
, 
mods
)

24 ::
g_cÚŒŞËr
->
	`Keybßrd
(
wšdow
, 
key
, 
sÿncode
, 
aùiÚ
, 
mods
);

25 
	}
}

27 
	$mou£bu‰Ú
(
GLFWwšdow
 *
wšdow
,
bu‰Ú
,
aùiÚ
,
mods
)

29 ::
g_cÚŒŞËr
->
	`Mou£Bu‰Ú
(
wšdow
, 
bu‰Ú
, 
aùiÚ
, 
mods
);

30 
	}
}

32 
	$mou£mÙiÚ
(
GLFWwšdow
 *
wšdow
, 
x
, 
y
)

34 ::
g_cÚŒŞËr
->
	`Mou£MÙiÚ
(
wšdow
, 
x
, 
y
);

35 
	}
}

37 
	gCÚŒŞËr
::
	$Regi¡”Objeù
(
Objeù
* 
objeù
)

39 
objeù
->
	`Re£t
();

40 
objeùs_
[
objeùNo_
++] = 
objeù
;

41 
aùiveObj_
++;

42 
	}
}

45 
	gCÚŒŞËr
::
	$CÚŒŞËr
(
¬gc
,**
¬gv
) {

46 
wšX_
 = 640;

47 
wšY_
 = 480;

49 
aùiveObj_
 = -1;

50 
objeùNo_
 = 0;

51 
maxObjeùNo_
 = 100;

52 
objeùs_
 = 
Ãw
 
Objeù
*[
maxObjeùNo_
];

54 
isCŒlP»s£d_
 = 
isLeáKeyP»s£d_
 = 
isMiddËKeyP»s£d_
 = 
isRightKeyP»s£d_
 = 
çl£
;

55 
isLightOn_
 = 
Œue
;

56 
´evX_
 = 
´evY_
 = 0;

59 ià(!
	`glfwIn™
()) {

60 
cout
 << "glfwIn™(èçed!" << 
’dl
;

61 
	`ex™
(0);

65 
wšdowHªdË_
 = 
	`glfwC»©eWšdow
(
wšX_
, 
wšY_
, 
WINDOWTITLE
, 
NULL
, NULL);

66 ià(!
wšdowHªdË_
) {

67 
cout
 << "C»©Wšdow faed" << 
’dl
;

68 
	`ex™
(0);

70 
	`glfwMakeCÚ‹xtCu¼’t
(
wšdowHªdË_
);

71 
	`glfwS‘WšdowPos
(
wšdowHªdË_
, 0, 0);

74 
	`glCË¬CŞÜ
( 0., 0., 0., 1. );

77 
	`glfwS‘E¼ÜC®lback
(
”rÜ_ÿÎback
);

78 
	`glfwS‘Mou£Bu‰ÚC®lback
(
wšdowHªdË_
, 
mou£bu‰Ú
);

79 
	`glfwS‘CursÜPosC®lback
(
wšdowHªdË_
, 
mou£mÙiÚ
);

80 
	`glfwS‘KeyC®lback
(
wšdowHªdË_
, 
keybßrd
);

81 
	`glfwS‘WšdowSizeC®lback
(
wšdowHªdË_
, 
»size
);

83 
	`In™Cam”a
();

84 
	}
}

86 
	gCÚŒŞËr
::
	$In™Cam”a
()

88 
ÿm”a_
 = 
Ãw
 
	`Cam”a
(
wšX_
, 
wšY_
);

89 
	}
}

91 
	gCÚŒŞËr
::
	$BegšLoİ
()

93 !
	`glfwWšdowShouldClo£
(
wšdowHªdË_
))

96 ::
g_cÚŒŞËr
->
	`D¿w
();

99 
	`glfwSw­Bufãrs
(
wšdowHªdË_
);

102 
	`glfwPŞlEv’ts
();

104 
	}
}

108 
	gCÚŒŞËr
::~
	$CÚŒŞËr
() {

109 
	`glFšish
();

110 
	`glfwDe¡royWšdow
(
wšdowHªdË_
);

111 
	`glfwT”mš©e
();

112 
	}
}

115 
	gCÚŒŞËr
::
	$Re£t
() {

116 
ÿm”a_
->
	`Re£t
(
wšX_
, 
wšY_
);

118 
i
 = 0 ; i < 
objeùNo_
 ; i++)

119 
objeùs_
[
i
]->
	`Re£t
();

120 
	}
}

122 
	gCÚŒŞËr
::
	$D¿w
() {

125 
ÿm”a_
->
	`D¿w
();

126 
i
 = 0 ; i < 
objeùNo_
 ; i++)

127 
objeùs_
[
i
]->
	`Show
();

131 
	}
}

133 
	gCÚŒŞËr
::
	$G‘AùiveObjeù
(
mx
, 
my
)

136  
aùiveObj_
;

137 
	}
}

139 
	gCÚŒŞËr
::
	$Qu™
() {

140 
	`glFšish
();

141 
	`glfwDe¡royWšdow
(
wšdowHªdË_
);

142 
	`ex™
(0);

143 
	}
}

146 
	gCÚŒŞËr
::
	$Resize
(
GLFWwšdow
 *
wšdow
, 
x
, 
y
) {

147 
wšX_
 = 
x
;

148 
wšY_
 = 
y
;

149 
ÿm”a_
->
	`S‘V›wpÜt
((
wšX_
), (
wšY_
));

150 
	}
}

152 
	gCÚŒŞËr
::
	$Keybßrd
(
GLFWwšdow
 * 
wšdow
, 
key
, 
sÿncode
, 
aùiÚ
, 
mods
)

154 ià(
aùiÚ
 =ğ
GLFW_PRESS
) {

155 
key
) {

156 
GLFW_KEY_ESCAPE
:

157 
	`Qu™
();

159 
GLFW_KEY_R
:

160 
	`Re£t
();

162 
GLFW_KEY_C
:

163 
objeùs_
[
aùiveObj_
]->
	`Compu‹V®’ûCŞÜ
();

164 
isLightOn_
 = !isLightOn_;

165 ià(
isLightOn_
) {

166 
	`glEÇbË
(
GL_LIGHT0
);

167 
	`glEÇbË
(
GL_LIGHTING
);

170 
	`glDi§bË
(
GL_LIGHT0
);

171 
	`glDi§bË
(
GL_LIGHTING
);

174 
GLFW_KEY_LEFT_CONTROL
:

175 
isCŒlP»s£d_
 = 
Œue
;

179 if(
aùiÚ
 =ğ
GLFW_RELEASE
)

180 
key
) {

181 
GLFW_KEY_LEFT_CONTROL
:

182 
isCŒlP»s£d_
 = 
çl£
;

185 
	}
}

188 
	gCÚŒŞËr
::
	$Mou£Bu‰Ú
(
GLFWwšdow
 *
wšdow
, 
bu‰Ú
,
aùiÚ
,
mods
)

192 if(
aùiÚ
 =ğ
GLFW_PRESS
) {

193 
	`glfwG‘CursÜPos
(
wšdow
, &
´evX_
, &
´evY_
);

196 
aùiveObj_
 = 
	`G‘AùiveObjeù
(
´evX_
, 
´evY_
);

197 
objeùs_
[
aùiveObj_
]->
	`Mou£Bu‰Ú
(
wšdow
, 
bu‰Ú
, 
aùiÚ
, 
mods
);

198 
	}
}

201 
	gCÚŒŞËr
::
	$Mou£MÙiÚ
(
GLFWwšdow
 *
wšdow
, 
nx
, 
ny
)

203 
objeùs_
[
aùiveObj_
]->
	`Mou£MÙiÚ
(
wšdow
, 
nx
, 
ny
);

204 
	}
}

	@controller.h

1 #iâdeà
CONTROLLER_H


2 
	#CONTROLLER_H


	)

4 
	~"cÜe.h
"

6 şas 
	cCÚŒŞËr
 {

7 
	mpublic
:

8 
CÚŒŞËr
(
¬gc
,**
¬gv
);

9 ~
CÚŒŞËr
();

11 
BegšLoİ
();

12 
Regi¡”Objeù
(
Objeù
* 
objeù
);

13 
Re£t
();

14 
D¿w
();

15 
In™Cam”a
();

17 
G‘AùiveObjeù
(
mx
, 
my
);

19 
Qu™
();

22 
Resize
(
GLFWwšdow
 *
wšdow
, 
x
, 
y
);

23 
Keybßrd
(
GLFWwšdow
 * 
wšdow
, 
key
, 
sÿncode
,
aùiÚ
, 
mods
);

24 
Mou£Bu‰Ú
(
GLFWwšdow
 *
wšdow
, 
bŠ
, 
aùiÚ
, 
mods
);

25 
Mou£MÙiÚ
(
GLFWwšdow
 *
wšdow
, 
x
, 
y
);

27 
	m´iv©e
:

29 
GLFWwšdow
 *
wšdowHªdË_
;

30 
	mwšX_
, 
	mwšY_
;

33 
boŞ
 
	misLeáKeyP»s£d_
, 
	misCŒlP»s£d_
, 
	misRightKeyP»s£d_
, 
	misMiddËKeyP»s£d_
;

34 
boŞ
 
	misLightOn_
;

36 
	m´evX_
, 
	m´evY_
;

38 
Objeù
** 
	mobjeùs_
;

39 
	mobjeùNo_
;

40 
	mmaxObjeùNo_
;

41 
	maùiveObj_
;

43 
Cam”a
* 
	mÿm”a_
;

	@core.h

1 #iâdeà
CORE_H


2 
	#CORE_H


	)

4 
	#PI
 3.14159

	)

5 
	#INF
 99999999

	)

7 
	~<cm©h
>

8 
	~<c¡dlib
>

9 
	~<c¡dio
>

10 
	~<c¡ršg
>

11 
	~<ùy³.h
>

12 
	~<²g.h
>

14 
	~<io¡»am
>

15 
	~<f¡»am
>

16 
	~<veùÜ
>

17 
	~<m­
>

18 
usšg
 
Çme¥aû
 
	g¡d
;

20 
	~<Eig’/D’£
>

21 
	~<Eig’/S·r£
>

22 
	~<Eig’/CÜe
>

23 
	~<Eig’/Geom‘ry
>

25 
	~<Eig’/S·r£ChŞesky
>

26 
	~<Eig’/S·r£QR
>

27 
	~<Eig’/S·r£LU
>

28 
	~<Eig’/I‹¿tiveLš—rSŞv”s
>

29 
	~<GL/gËw.h
>

30 
	#GLFW_INCLUDE_GLU


	)

31 
	~<GLFW/glfw3.h
>

32 
	~<O³nMesh/CÜe/IO/MeshIO.hh
>

33 
	~<O³nMesh/CÜe/Mesh/PŞyMesh_A¼ayK”ÃlT.hh
>

34 
	~<O³nMesh/CÜe/Mesh/TriMesh_A¼ayK”ÃlT.hh
>

36 
	~<GL/gl.h
>

37 
	~<GL/glu.h
>

40 
	gEig’
::
	tTrËt
<
	tGLdoubË
> 
	tT
;

41 
	~"¬cb®l.h
"

42 
	~"ev’t_li¡’”.h
"

43 
	~"qu©”niÚ.h
"

47 
	~"ÿm”a.h
"

50 
	~"objeù.h
"

51 
	~"cÚŒŞËr.h
"

	@event_listener.h

1 şas 
	cEv’tLi¡’”
 {

2 
	mpublic
:

3 
vœtu®
 
Mou£Bu‰Ú
(
GLFWwšdow
 *
wšdow
, 
bu‰Ú
,
aùiÚ
,
mods
) = 0;

4 
vœtu®
 
Mou£MÙiÚ
(
GLFWwšdow
 *
wšdow
, 
nx
, 
ny
) = 0;

5 
vœtu®
 
Keybßrd
(
GLFWwšdow
 * 
wšdow
, 
key
, 
sÿncode
, 
aùiÚ
, 
mods
) = 0;

6 
vœtu®
 
Resize
(
GLFWwšdow
 *
wšdow
, 
x
, 
y
) = 0;

	@main.cpp

1 
	~"cÜe.h
"

3 
CÚŒŞËr
* 
	gg_cÚŒŞËr
 = 
NULL
;

5 
	$maš
(
¬gc
, **
¬gv
) {

6 
Objeù
* 
objeù
 = 
Ãw
 Object;

7 ::
g_cÚŒŞËr
 = 
Ãw
 
	`CÚŒŞËr
(
¬gc
, 
¬gv
);

8 ::
g_cÚŒŞËr
->
	`Regi¡”Objeù
(
objeù
);

9 ::
g_cÚŒŞËr
->
	`BegšLoİ
();

11 
	}
}

	@object.cpp

1 
	~"cÜe.h
"

3 
	gObjeù
::
	$Objeù
() {

4 
	`Re£t
();

5 
	}
}

7 
	gObjeù
::
	$Mou£Bu‰Ú
(
GLFWwšdow
 *
wšdow
, 
bu‰Ú
,
aùiÚ
,
mods
)

9 
mou£X
, 
mou£Y
;

11 if(
bu‰Ú
 =ğ
GLFW_MOUSE_BUTTON_LEFT
) {

12 ::
	`glfwG‘CursÜPos
(
wšdow
, &
mou£X
, &
mou£Y
);

13 if(
aùiÚ
 =ğ
GLFW_PRESS
) {

14 
isLeáKeyP»s£d_
 = 
Œue
;

15 
¬cb®l
.
	`¡¬tRÙ©iÚ
(
mou£X
, 
mou£Y
);

17 if(
aùiÚ
 =ğ
GLFW_RELEASE
) {

18 
isLeáKeyP»s£d_
 = 
çl£
;

19 
¬cb®l
.
	`¡İRÙ©iÚ
();

22 if(
bu‰Ú
 =ğ
GLFW_MOUSE_BUTTON_MIDDLE
) {

23 
isMiddËKeyP»s£d_
 = (
aùiÚ
 =ğ
GLFW_PRESS
);

25 if(
bu‰Ú
 =ğ
GLFW_MOUSE_BUTTON_RIGHT
) {

26 ià(
aùiÚ
 =ğ
GLFW_PRESS
) {

27 
isRightKeyP»s£d_
 = 
Œue
;

28 ::
	`glfwG‘CursÜPos
(
wšdow
, &
´evX_
, &
´evY_
);

30 if(
aùiÚ
 ==
GLFW_RELEASE
) {

31 
isRightKeyP»s£d_
 = 
çl£
;

34 
	}
}

36 
	gObjeù
::
	$Mou£MÙiÚ
(
GLFWwšdow
 *
wšdow
, 
nx
, 
ny
)

38 if(
isLeáKeyP»s£d_
 && 
isCŒlP»s£d_
) {

40 if(
isLeáKeyP»s£d_
) {

41 
¬cb®l
.
	`upd©eRÙ©iÚ
(
nx
, 
ny
);

43 if(
isRightKeyP»s£d_
) {

45 
	}
}

47 
	gObjeù
::
	$Compu‹NÜm®
(
GLæßt
 
v
[3][3], GLæßˆ
nÜm®
[])

49 
v1
[3],
v2
[3];

50 cÚ¡ 
x
 = 0;

51 cÚ¡ 
y
 = 1;

52 cÚ¡ 
z
 = 2;

55 
v1
[
x
] = 
v
[0][x] - v[1][x];

56 
v1
[
y
] = 
v
[0][y] - v[1][y];

57 
v1
[
z
] = 
v
[0][z] - v[1][z];

59 
v2
[
x
] = 
v
[1][x] - v[2][x];

60 
v2
[
y
] = 
v
[1][y] - v[2][y];

61 
v2
[
z
] = 
v
[1][z] - v[2][z];

65 
nÜm®
[
x
] = 
v1
[
y
]*
v2
[
z
] - v1[z]*v2[y];

66 
nÜm®
[
y
] = 
v1
[
z
]*
v2
[
x
] - v1[x]*v2[z];

67 
nÜm®
[
z
] = 
v1
[
x
]*
v2
[
y
] - v1[y]*v2[x];

70 
	}
}

72 
	gObjeù
::
	$Upd©eMod–
() {

77 
qtRÙ
.
	`MakeRÙ©iÚQu©”niÚ
(
ªgË
, 
axis
[0],‡xis[1],‡xis[2]);

78 
qtRÙ
.
	`MakeT¿nsfÜm©iÚM©rix
(
ŒªsfÜmM©rix
, 
Œª¦©iÚ
);

79 
	`glMuÉM©rixd
(
ŒªsfÜmM©rix
);

80 
	`mem£t
((*)
Œª¦©iÚ
, 0, (translation));

83 
	}
}

85 
	gObjeù
::
	$T¿n¦©e
(
GLæßt
 
x
, GLæßˆ
y
, GLæßˆ
z
)

87 
Eig’
::
VeùÜ4f
 
ÜigšT¿ns
;

88 
Eig’
::
VeùÜ4f
 
Œªs
;

89 
Eig’
::
M©rix4f
 
mod–
;

91 
	`glG‘DoubËv
(
GL_MODELVIEW_MATRIX
, 
mod–M©rix
);

92 
i
 = 0 ; i < 4 ; ++i)

93 
j
 = 0 ; j < 4 ; ++j)

94 
	`mod–
(
i
, 
j
èğ
mod–M©rix
[i * 4 + j];

96 
	`ÜigšT¿ns
(0èğ
x
;

97 
	`ÜigšT¿ns
(1èğ
y
;

98 
	`ÜigšT¿ns
(2èğ
z
;

99 
	`ÜigšT¿ns
(3) = 0;

101 
Œªs
 = 
mod–
 * 
ÜigšT¿ns
;

103 
i
 = 0 ; i < 4 ; ++i)

104 
Œª¦©iÚ
[
i
] = 
	`Œªs
(i);

111 
	}
}

113 
	gObjeù
::
	$S‘D–X
(
GLæßt
 
dx
)

115 
d–X
 = 
dx
;

116 
	}
}

118 
	gObjeù
::
	$S‘D–Y
(
GLæßt
 
dy
)

120 
d–Y
 = 
dy
;

121 
	}
}

123 
	gObjeù
::
	$Re£t
() {

125 
¡d
::
cout
 << "objeù„e£t" << std::
’dl
;

126 
d¿wMode
 = 
GL_FILL
;

128 
d•th
 = 5.0;

129 
rÙX
 = 15;

130 
rÙY
 = 15;

131 
ªgË
 = 0;

132 
d–X
 = 0;

133 
d–Y
 = 0;

135 
axis
[0] = 0.0;

136 
axis
[1] = 0.0;

137 
axis
[2] = 1.0;

138 
axis
[3] = 1.0;

140 
	`mem£t
((*)
mod–M©rix
, 0, (modelMatrix) );

141 
	`mem£t
((*)
´ojM©rix
, 0, (projMatrix) );

142 
	`mem£t
((*)
Üigš
, 0, (origin) );

143 
	`mem£t
((*)
Œª¦©iÚ
, 0, (translation) );

145 
	`glM©rixMode
(
GL_MODELVIEW
);

146 
	`glLßdId’t™y
();

148 
	`glT¿n¦©ef
(0, 0, -5);

149 
	`glRÙ©ef
(20, 1, 0, 0);

150 
	`glRÙ©ef
(-30, 0, 1, 0);

153 
	}
}

155 
boŞ
 
	gObjeù
::
	$LßdFe
(* 
feName
)

157 
fe
.
	`İ’
(
feName
);

158 ià(!
fe
) {

159 
cout
 << "O³Àfe: " << 
feName
 << " faed!" << 
’dl
;

160  
çl£
;

162 
cout
 << "O³Àfe: " << 
feName
 << " sucûed!" << 
’dl
;

164  
Œue
;

165 
	}
}

169 
	gObjeù
::
	$Cube
() {

170 
	`glPŞygÚMode
(
GL_FRONT_AND_BACK
, 
GL_FILL
);

171 
GLæßt
 
v”tiûs
[][3] = { { -1.0f, -1.0f, -1.0f },

176 
çûs
[][4] = { { 1, 2, 6, 5 }, { 2, 3, 7, 6 }, { 4, 5, 6, 7 },

179 
GLæßt
 
cŞÜs
[][3] = { { 0.0f, 1.0f, 1.0f }, { 1.0f, 0.0f, 1.0f },

183 
	`glBegš
(
GL_QUADS
);

184 
i
 = 0; i < 6; i++) {

186 
	`glCŞÜ3fv
(
cŞÜs
[
i
]);

187 
j
 = 0; j < 4; j++)

188 
	`glV”‹x3fv
(
v”tiûs
[
çûs
[
i
][
j
]]);

191 
	`glEnd
();

192 
	}
}

194 
	gObjeù
::
	$Cuboid
(
GLæßt
 
boxmš
[], GLæßˆ
boxmax
[])

196 
	`glPŞygÚMode
(
GL_FRONT_AND_BACK
, 
GL_LINE
);

197 
GLæßt
 
v”tiûs
[][3] = {

198 {
boxmš
[0], boxmin[1], boxmin[2]},

199 {
boxmax
[0], 
boxmš
[1], boxmin[2]},

200 {
boxmax
[0], boxmax[1], 
boxmš
[2]},

201 {
boxmš
[0], 
boxmax
[1], boxmin[2]},

202 {
boxmš
[0], boxmš[1], 
boxmax
[2]},

203 {
boxmax
[0], 
boxmš
[1], boxmax[2]},

204 {
boxmax
[0], boxmax[1], boxmax[2]},

205 {
boxmš
[0], 
boxmax
[1], boxmax[2]}

207 
çûs
[][4] = {

215 
GLæßt
 
cŞÜs
[][3] = {

224 
	`glBegš
(
GL_QUADS
);

225 
i
 = 0; i < 6; i++) {

226 
	`glCŞÜ3fv
(
cŞÜs
[
i
]);

227 
j
 = 0; j < 4; j++)

228 
	`glV”‹x3fv
(
v”tiûs
[
çûs
[
i
][
j
]]);

230 
	`glEnd
();

231 
	}
}

234 
	gObjeù
::
	$Show
() {

243 
	`Cube
();

249 
	}
}

251 
	gObjeù
::
	$S‘Shadšg
(
mode
)

253 
	}
}

255 
Objeù
::
	$S‘Curv©u»Mode
(
mode
)

257 
	}
}

259 
GLæßt
 
Objeù
::
	$G‘RÙX
()

261  
rÙX
;

262 
	}
}

264 
GLæßt
 
	gObjeù
::
	$G‘RÙY
()

266  
rÙY
;

267 
	}
}

269 
	gObjeù
::
	$S‘RÙX
(
GLæßt
 
x
)

271 
rÙX
 = 
x
;

272 
	}
}

274 
	gObjeù
::
	$S‘RÙY
(
GLæßt
 
y
)

276 
rÙY
 = 
y
;

277 
	}
}

	@object.h

1 #iâdeà
DRAWER_H


2 
	#DRAWER_H


	)

4 
	~"cÜe.h
"

8 şas 
	cObjeù
: 
public
 
Ev’tLi¡’”
{

9 
public
:

10 
Objeù
();

12 
S‘D¿wMode
(
GL’um
 
mode
);

13 
Re£t
();

15 
S‘RÙX
(
GLæßt
 
x
);

16 
S‘RÙY
(
GLæßt
 
y
);

17 
S‘AngË
(
GLæßt
 
ªgË
);

18 
S‘D–X
(
GLæßt
 
dx
);

19 
S‘D–Y
(
GLæßt
 
dy
);

20 
AddAngË
(
GLæßt
 
ªgË
);

22 
UnProjeù
(
dx
, 
dy
);

23 
UnProjeù
(
´evX
, 
´evY
, 
de¡X
, 
de¡Y
,

24 
wšX
, 
wšY
);

26 
T¿n¦©e
(
GLæßt
 
x
, GLæßˆ
y
, GLæßˆ
z
);

28 
GLæßt
 
G‘AngË
();

29 
GLæßt
 
G‘RÙX
();

30 
GLæßt
 
G‘RÙY
();

32 
Compu‹NÜm®
(
GLæßt
 
v
[3][3], GLæßˆ
nÜm®
[]);

33 
Upd©eMod–
();

35 
Cube
();

36 
Cuboid
(
GLæßt
 
boxmš
[], GLæßˆ
boxmax
[]);

38 
vœtu®
 
Show
();

39 
vœtu®
 
boŞ
 
LßdFe
(* 
feName
);

40 
vœtu®
 
	$Compu‹V”‹xNÜm®
() {}

41 
vœtu®
 
	$Compu‹V®’ûCŞÜ
(è{
	}
}

42 
vœtu®
 
	$Compu‹Curv©u»CŞÜ
(è{
	}
}

44 
vœtu®
 
	$C®cuÏ‹P¬am‘”iz©iÚ
(è{
	}
}

46 
vœtu®
 
Mou£Bu‰Ú
(
GLFWwšdow
 *
wšdow
, 
bu‰Ú
,
aùiÚ
,
mods
);

47 
vœtu®
 
Mou£MÙiÚ
(
GLFWwšdow
 *
wšdow
, 
nx
, 
ny
);

48 
vœtu®
 
	$Keybßrd
(
GLFWwšdow
 * 
wšdow
, 
key
, 
sÿncode
, 
aùiÚ
, 
mods
è{
	}
}

49 
vœtu®
 
	$Resize
(
GLFWwšdow
 *
wšdow
, 
x
, 
y
è{
	}
}

51 
S‘Shadšg
(
mode
);

52 
S‘Curv©u»Mode
(
mode
);

54 
	g´Ùeùed
:

55 
f¡»am
 
fe
;

56 
GL’um
 
	gd¿wMode
;

58 
GLæßt
 
	gd–X
;

59 
GLæßt
 
	gd–Y
;

60 
GLæßt
 
	grÙX
;

61 
GLæßt
 
	grÙY
;

62 
GLæßt
 
	gªgË
;

63 
GLæßt
 
	gd•th
;

65 
GLdoubË
 
	gaxis
[4];

66 
GLdoubË
 
	gmod–M©rix
[16];

67 
GLdoubË
 
	g´ojM©rix
[16];

68 
GLdoubË
 
	gÜigš
[4];

69 
GLšt
 
	gv›wpÜt
[4];

71 
	gmy
::
Qu©”niÚ
 
qt
(, , , );

72 
	gmy
::
Qu©”niÚ
 
qtRÙ
;

73 
GLdoubË
 
	gŒªsfÜmM©rix
[16];

74 
GLdoubË
 
	gŒª¦©iÚ
[4];

77 
boŞ
 
	gisLeáKeyP»s£d_
, 
	gisCŒlP»s£d_
, 
	gisRightKeyP»s£d_
, 
	gisMiddËKeyP»s£d_
;

78 
	g´evX_
, 
	g´evY_
;

80 
Arcb®l
 
	g¬cb®l
;

82 
	#SMOOTH_SHADING
 0

	)

83 
	#FLAT_SHADING
 1

	)

84 
	#CREASE_SHADING
 2

	)

86 
	#GAUSSIAN_CURVATURE
 1

	)

87 
	#MEAN_CURVATURE
 2

	)

	@quaternion.cpp

1 
	~"cÜe.h
"

3 
Çme¥aû
 
	gmy
 {

5 
	gQu©”niÚ
::
Qu©”niÚ
()

7 
s
 = 1.0;

8 
	gx
 = 0.0;

9 
	gy
 = 0.0;

10 
	gz
 = 0.0;

13 
	gQu©”niÚ
::
Qu©”niÚ
(
GLdoubË
 
s
, GLdoubË 
x
, GLdoubË 
y
, GLdoubË 
z
)

15 
Re£t
(
s
, 
x
, 
y
, 
z
);

18 
	gQu©”niÚ
::
Re£t
(
GLdoubË
 
s
, GLdoubË 
x
, GLdoubË 
y
, GLdoubË 
z
)

20 
	gthis
->
	gs
 = 
s
;

21 
	gthis
->
	gx
 = 
x
;

22 
	gthis
->
	gy
 = 
y
;

23 
	gthis
->
	gz
 = 
z
;

27 
	gQu©”niÚ
::
MakeRÙ©iÚQu©”niÚ
(
GLdoubË
 
ªgË
, GLdoubË 
x
, GLdoubË 
y
, GLdoubË 
z
)

29 
	gªgË
 *ğ
PI
 / 180;

30 
GLdoubË
 
	gr
 = 
sš
(
ªgË
 / 2è/ 
sq¹
(
x
 * x + 
y
 * y + 
z
 * z);

31 
	gthis
->
	gs
 = 
cos
(
ªgË
 / 2);

32 
	gthis
->
	gx
 = 
r
 * 
x
;

33 
	gthis
->
	gy
 = 
r
 * 
y
;

34 
	gthis
->
	gz
 = 
r
 * 
z
;

37 
	gQu©”niÚ
::
MakeT¿nsfÜm©iÚM©rix
(
GLdoubË
 
m©rix
[16], GLdoubË 
off£t
[4])

39 
	gd
 = 
s
 * s + 
x
 * x + 
y
 * y + 
z
 * z;

41 
	gm©rix
[0] = 1 - 2*(
y
*y + 
z
*z)/
d
;

42 
	gm©rix
[1] = 2*(
x
*
y
 + 
s
*
z
)/
d
;

43 
	gm©rix
[2] = 2*(
x
*
z
 - 
s
*
y
)/
d
;

44 
	gm©rix
[3] = 0.0;

45 
	gm©rix
[4] = 2*(
x
*
y
 - 
s
*
z
)/
d
;

46 
	gm©rix
[5] = 1 - 2*(
x
*x + 
z
*z)/
d
;

47 
	gm©rix
[6] = 2*(
y
*
z
 + 
s
*
x
)/
d
;

48 
	gm©rix
[7] = 0.0;

49 
	gm©rix
[8] = 2*(
x
*
z
 + 
s
*
y
)/
d
;

50 
	gm©rix
[9] = 2*(
y
*
z
 - 
s
*
x
)/
d
;

51 
	gm©rix
[10] = 1 - 2*(
x
*x + 
y
*y)/
d
;

52 
	gm©rix
[11] = 0.0;

53 
	gm©rix
[12] = 
off£t
[0];

54 
	gm©rix
[13] = 
off£t
[1];

55 
	gm©rix
[14] = 
off£t
[2];

56 
	gm©rix
[15] = 1.0;

	@quaternion.h

1 #iâdeà
QUATERNION_H


2 
	#QUATERNION_H


	)

4 
	~"cÜe.h
"

6 
Çme¥aû
 
	gmy
 {

7 şas 
	cQu©”niÚ
 {

8 
	gpublic
:

9 
Qu©”niÚ
();

10 
Qu©”niÚ
(
GLdoubË
 
s
, GLdoubË 
x
, GLdoubË 
y
, GLdoubË 
z
);

11 
Re£t
(
GLdoubË
 
s
, GLdoubË 
x
, GLdoubË 
y
, GLdoubË 
z
);

12 
MakeRÙ©iÚQu©”niÚ
(
GLdoubË
 
s
, GLdoubË 
x
, GLdoubË 
y
, GLdoubË 
z
);

13 
MakeT¿nsfÜm©iÚM©rix
(
GLdoubË
 
m©rix
[16], GLdoubË 
off£t
[4]);

14 
	g´iv©e
:

15 
GLdoubË
 
s
;

16 
GLdoubË
 
	gx
;

17 
GLdoubË
 
	gy
;

18 
GLdoubË
 
	gz
;

	@
1
.
0
13
151
arcball.cpp
arcball.h
camera.cpp
camera.h
controller.cpp
controller.h
core.h
event_listener.h
main.cpp
object.cpp
object.h
quaternion.cpp
quaternion.h
